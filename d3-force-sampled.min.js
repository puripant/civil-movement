// Copyright 2019 Two Six Labs, LLC. v1.0.0 d3-force-sampled https://github.com/twosixlabs/d3-force-sampled/
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.d3=n.d3||{})}(this,function(n){"use strict";function t(n){return function(){return n}}n.forceManyBodySampled=function(){function n(n){var t,e,r,o,i=Math.floor(w()*f.length),u=f[i],a=(n.x-u.x)*(n.x-u.x)+(n.y-u.y)*(n.y-u.y),h=-1/0,l=-1;if(!(n.nearest.indexOf(i)>=0))if(n.nearest.length<c)n.nearest.push(i);else{for(;++l<n.nearest.length;)t=n.nearest[l],e=f[t],(r=Math.hypot(n.x-e.x,n.y-e.y))>h&&(o=l,h=r);a<h&&(n.nearest[o]=i)}}function e(n){var t,e,r,o,i,c,l;for(t=(e=function(n,t){t=Math.floor(t);var e,r,o,i=f.length,u=i-t;for(e=i-1;e>=u;--e)o=n[r=Math.floor(w()*e)],n[r]=n[e],n[e]=o;return n.slice(u)}(h,s)).length-1;t>=0;--t)(r=f[e[t]])!==n&&((l=(i=r.x-n.x)*i+(c=r.y-n.y)*c)>=p||(0===i&&(i=1e-6*(w()-.5),l+=i*i),0===c&&(c=1e-6*(w()-.5),l+=c*c),l<d&&(l=Math.sqrt(d*l)),o=a[n.index]*u*g/l,n.vx+=i*o,n.vy+=c*o))}function r(t){var e,r,o,i,h,l,s;if(c&&n(t),r=t.nearest,c)for(e=r.length-1;e>=0;--e)(o=f[r[e]])!==t&&((s=(h=o.x-t.x)*h+(l=o.y-t.y)*l)>=p||(0===h&&(h=1e-6*(w()-.5),s+=h*h),0===l&&(l=1e-6*(w()-.5),s+=l*l),s<d&&(s=Math.sqrt(d*s)),i=a[t.index]*u*g/s,t.vx+=h*i,t.vy+=l*i))}function o(n){var t=0,o=M,i=f.length,a=M+l;for(u=n;t<i||o<a;++t,++o)o<a&&e(f[o%i]),c&&t<i&&r(f[t]);M=a%i}function i(){if(f){var t,e,r=f.length;for(h=new Array(r),t=0;t<r;++t)h[t]=t;for(a=new Array(r),c=(c=Math.min(Math.ceil(x(f)),r))<0?0:Math.min(c,f.length),l=(l=Math.ceil(v(f)))<0?0:Math.min(l,r),s=(s=Math.ceil(m(f)))<0?0:Math.min(s,r),g=q(f),u=1,t=0;t<r;++t)for(e=f[t],a[e.index]=+y(e,t,f),e.nearest=[];e.nearest.length<c;)n(e)}}var f,u,a,h,c,l,s,g,y=t(-30),M=0,d=1,p=1/0,x=function(){return 15},v=function(n){return Math.pow(n.length,.75)},m=function(n){return Math.pow(n.length,.25)},q=function(n){return n.length<100?1:n.length<200?3:Math.sqrt(n.length)},w=Math.random;return o.initialize=function(n){f=n,i()},o.strength=function(n){return arguments.length?(y="function"==typeof n?n:t(+n),i(),o):y},o.distanceMin=function(n){return arguments.length?(d=n*n,o):Math.sqrt(d)},o.distanceMax=function(n){return arguments.length?(p=n*n,o):Math.sqrt(p)},o.neighborSize=function(n){return arguments.length?(x="function"==typeof n?n:t(+n),i(),o):x},o.updateSize=function(n){return arguments.length?(v="function"==typeof n?n:t(+n),i(),o):v},o.sampleSize=function(n){return arguments.length?(m="function"==typeof n?n:t(+n),i(),o):m},o.chargeMultiplier=function(n){return arguments.length?(q="function"==typeof n?n:t(+n),i(),o):q},o.source=function(n){return arguments.length?(w=n,o):w},o},Object.defineProperty(n,"__esModule",{value:!0})});